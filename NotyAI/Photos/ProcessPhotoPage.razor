@using NotyAI.Notes

@inject CurrentPhoto CurrentPhoto
@inject Note Note
@inject NavigationManager NavigationManager

@page "/ProcessPhoto"

<MudStack AlignItems="AlignItems.Center" Justify="Justify.Center">
    <MudProgressCircular Indeterminate="true"/>
    <MudText Typo="Typo.h2">
        Trwa odczytywanie tekstu ze zdjÄ™cia...
    </MudText>
</MudStack>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await CurrentPhoto.ReadText();
        
        Note.AddPhoto(CurrentPhoto.Source);
        Note.AddText(CurrentPhoto.Text);

        Note.Summarize();
        
        NavigationManager.NavigateTo("/Results");
    }

}